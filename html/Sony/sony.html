<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sony A7S all-sky camera &mdash; KHO Recipes  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Welcome to KHO Recipes!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            KHO Recipes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Sony A7S all-sky camera</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-description">Data description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#star-calibration">Star calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#computer-setup">Computer setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#software">Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="#drawbacks-in-the-current-implementation">Drawbacks in the current implementation</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KHO Recipes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Sony A7S all-sky camera</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Sony/sony.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sony-a7s-all-sky-camera">
<h1>Sony A7S all-sky camera<a class="headerlink" href="#sony-a7s-all-sky-camera" title="Link to this heading"></a></h1>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Where is the data?</p></td>
<td><p>Quicklook images at <code class="docutils literal notranslate"><span class="pre">birkeland</span></code>, archive at NIRD</p></td>
</tr>
<tr class="row-even"><td><p>Who?</p></td>
<td><p>Dag (PI) and Mikko</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Where?</p></td>
<td rowspan="2"><p>Module 3</p></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>Main operational task</p></td>
<td><p>Starting and stopping of the imaging</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The first Sony images up to and including 14 Nov 2015 are out of focus</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The date and time in the EXIF-data in each JPEG-image are <strong>incorrect</strong>. The correct date and time
are embedded in the filename.</p>
</div>
<section id="data-description">
<h2>Data description<a class="headerlink" href="#data-description" title="Link to this heading"></a></h2>
<p>The Sony camera stores colour all-sky images in JPEG-format. The image cadence is roughly one image every 10-12 seconds.
Also, there are quicklook images for realtime webpage: these have a small label indicating date and time of the image.</p>
<p>The summary plots are keograms covering the dark time of each day.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The filenaming convention is a bit confusing, but the raw files are <code class="docutils literal notranslate"><span class="pre">LYR-Sony-ddmmyy-HHMMSS.jpg</span></code> where <code class="docutils literal notranslate"><span class="pre">dd</span></code> and <code class="docutils literal notranslate"><span class="pre">mm</span></code> are
the day and month, <code class="docutils literal notranslate"><span class="pre">yy</span></code> are the last two digits of the year and <code class="docutils literal notranslate"><span class="pre">HHMMSS</span></code> are the hours, minutes and seconds of the UT time
(start of exposure). The keograms are named slightly differently with a full four digit year <code class="docutils literal notranslate"><span class="pre">LYR-Sony-yyyymmdd.png</span></code>.</p>
</div>
<p>The data from Sony is archived to <a class="reference external" href="https://www.sigma2.no/data-storage">NIRD</a>.</p>
</section>
<section id="star-calibration">
<h2>Star calibration<a class="headerlink" href="#star-calibration" title="Link to this heading"></a></h2>
<p>Examples and source code for doing a simple star calibration can be found
at <a class="reference external" href="https://github.com/mikkosyrjasuo/UNIS-starcalibration">github</a></p>
</section>
<hr class="docutils" />
<section id="computer-setup">
<h2>Computer setup<a class="headerlink" href="#computer-setup" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>Control computer</dt><dd><ul class="simple">
<li><p>Ubuntu 14.04</p></li>
<li><p>Use ssh for remote access</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When starting the imaging software, wait for a password prompt! This may take a while…</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You need to use the imaging software GUI, which requires all sorts of ssh-tunneling via VNC etc. (which does not seem to work well from Windows…)</p>
</div>
</section>
<hr class="docutils" />
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Sony camera body does not include a GPS and the current imaging software does not check nor update
the date and time in the camera. This results in incorrect EXIF-data in the images. One should set the
date and time to match the season when powering up the camera at the start of the season.</p>
</div>
<p>The configuration of the python program is done in the <code class="docutils literal notranslate"><span class="pre">.pysces_asi/settings.txt</span></code> file.</p>
<p>As of December, 2020, the following settings for exposure time etc. are in use:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Min time between images</p></th>
<th class="head"><p>ISO</p></th>
<th class="head"><p>Shutter speed</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Nighttime</p></td>
<td><p>10s</p></td>
<td><p>16000</p></td>
<td><p>4 s</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Day Time1</p></td>
<td><p>30s</p></td>
<td><p>100</p></td>
<td><p>1/1000s</p></td>
<td><p>Not actually used?</p></td>
</tr>
<tr class="row-even"><td><p>Day Time2</p></td>
<td><p>30s</p></td>
<td><p>100</p></td>
<td><p>1/2000s</p></td>
<td><p>Not actually used?</p></td>
</tr>
<tr class="row-odd"><td><p>Twilight1</p></td>
<td><p>30s</p></td>
<td><p>100</p></td>
<td><p>1/8s</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Twilight2</p></td>
<td><p>30s</p></td>
<td><p>200</p></td>
<td><p>1s</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Twilight3</p></td>
<td><p>30s</p></td>
<td><p>2000</p></td>
<td><p>1.3s</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>The mode is selected based on the location of the Sun and the Moon in the sky, but not on the phase
of the Moon. One should also note that in LYR the Moon is always less than 40 degrees above the horizon
during wintertime… Here is the selection logic:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SUN_ANGLE</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">SUN_ANGLE</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">3</span> <span class="ow">and</span> <span class="n">MOON_ANGLE</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="o">=</span> <span class="s2">&quot;Twilight1&quot;</span>
<span class="n">SUN_ANGLE</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">3</span> <span class="ow">and</span> <span class="n">SUN_ANGLE</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">6</span> <span class="ow">and</span> <span class="n">MOON_ANGLE</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="o">=</span> <span class="s2">&quot;Twilight2&quot;</span>
<span class="n">SUN_ANGLE</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">6</span> <span class="ow">and</span> <span class="n">SUN_ANGLE</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">9</span> <span class="ow">and</span> <span class="n">MOON_ANGLE</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="o">=</span> <span class="s2">&quot;Twilight3&quot;</span>
<span class="n">SUN_ANGLE</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">9</span> <span class="ow">and</span> <span class="n">MOON_ANGLE</span> <span class="o">&lt;</span> <span class="mi">40</span> <span class="o">=</span> <span class="s2">&quot;Night Time&quot;</span>
</pre></div>
</div>
<p>There is a backup system disk image in KHO-WD4</p>
</section>
<section id="software">
<h2>Software<a class="headerlink" href="#software" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">paskil</span></code> software was originally developed by Nial Peters (2009). For details, see his Master’s thesis
<a class="reference external" href="http://urn.nb.no/URN:NBN:no-22683">http://urn.nb.no/URN:NBN:no-22683</a></p>
<p>There are also <code class="docutils literal notranslate"><span class="pre">pysces_asi</span></code> and <code class="docutils literal notranslate"><span class="pre">paskil</span></code> python libraries being used. There are copies in NIRD and
in github (<a class="reference external" href="https://github.com/paalge">https://github.com/paalge</a>)</p>
<blockquote>
<div><ul class="simple">
<li><p>Instructions for starting and stopping of the camera operations are as the desktop background image.
Originals can be found in <code class="docutils literal notranslate"><span class="pre">khodata:\Doc\Instrument</span> <span class="pre">instruction</span> <span class="pre">sheets\Sony_a7s</span></code></p></li>
<li><p>The software will ask for password for various network drives. It may take some time before the
dialog window appears (i.e. several minutes)</p></li>
<li><p>Data management routines are operated via <code class="docutils literal notranslate"><span class="pre">crontab</span></code></p></li>
</ul>
</div></blockquote>
</section>
<hr class="docutils" />
<section id="drawbacks-in-the-current-implementation">
<h2>Drawbacks in the current implementation<a class="headerlink" href="#drawbacks-in-the-current-implementation" title="Link to this heading"></a></h2>
<p>The current software and setup is a result of incremental additions to the original software. Especially the data
management routines are a bit convoluted and reflect various changes in KHO infrastructure (local disk, NAS-box, NIRD).
Also, <code class="docutils literal notranslate"><span class="pre">pysces_asi</span></code> writes huge log files, which is probably a left-over from earlier debugging efforts.</p>
<p>The scheduler appears to be free-running rather than tighly synchronised to system time. This makes the timestamps in filenames inconsistent, which then requires additional care when working with data. The directory structure for data and how the routines pack images into tar-files for archival is somewhat peculiar.</p>
<p>For example, here is what comes out when unpacking archived tar-files <code class="docutils literal notranslate"><span class="pre">20200107.tar.gz</span></code> (note missing directories for year and month):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">06</span><span class="o">/</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133004.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133015.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133027.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133038.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133050.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133102.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133113.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133125.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133137.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133148.</span><span class="n">jpg</span>
<span class="mi">06</span><span class="o">/</span><span class="n">Images</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">070120_133200.</span><span class="n">jpg</span>
</pre></div>
</div>
<p>One more practical issue is that the date format in the filename is day-month-(incomplete)-year . Perhaps, in future we might have time to
re-write parts of the code to result in more user-friendly archived data packages. Also, the image capture times could
be consistently fixed to, for example, every 10 seconds during nighttime:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133000.</span><span class="n">jpg</span>
<span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133010.</span><span class="n">jpg</span>
<span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133020.</span><span class="n">jpg</span>
<span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133030.</span><span class="n">jpg</span>
<span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133040.</span><span class="n">jpg</span>
<span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133050.</span><span class="n">jpg</span>
<span class="mi">2020</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="n">LYR</span><span class="o">-</span><span class="n">Sony</span><span class="o">-</span><span class="mf">20200107_133100.</span><span class="n">jpg</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to KHO Recipes!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Mikko Syrjäsuo/UNIS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>